# 03. 创作工作流 (Creative Workflow)

## 1. 初始化 (Seed & Templates)

- **开局即用**：用户创建项目时，系统根据预设模板（Schema）自动生成一棵包含“地理、社会、角色”等节点的初始树。
- **骨架填充**：初始节点可能只有标题（如“地形设定”），内容为空。用户可以一键“AI 填充”，让 AI 根据项目名自动补全所有子节点的初始 KV。

## 2. 运行与迭代 (Run & Iterate)

### 2.1 Step Run (单步运行)
- **场景**：用户选中“气候”节点，输入指令：“设计一个极寒但有地热资源的生态”。
- **执行**：
  1. Runner 收集上下文（世界观名字、父级地理信息）。
  2. AI 调用 `update_kv` 填充气候设定。
  3. 生成新版本 v1。

### 2.2 Redo / Refine (重做与精修)
- **场景**：用户觉得 v1 太普通，想要更魔幻一点。
- **执行**：
  1. 用户选中 v1 作为 **Baseline**。
  2. 输入指令：“加入魔法元素，地热是龙的呼吸”。
  3. AI 读取 v1 数据，进行修改。
  4. 生成新版本 v2。

## 3. 聚合与消费 (Aggregation & Consumption)

创作的终点是产出（大纲、剧本）。

- **自动聚合 (Auto-Aggregation)**:
  - 当用户进入“大纲生成”步骤时，系统会自动遍历“世界观树”。
  - 将所有 Leaf Node 的 `Adopted Version` 内容拼接成一份完整的 `World Bible` (Markdown)。
  - 这份 Bible 作为 Context 喂给写大纲的 AI。
- **引用 (Reference)**:
  - 在写剧本时，如果提到“亚特兰蒂斯”，系统能自动反向查找世界观树中的对应节点，并将其详细设定浮窗展示或喂给 AI。

## 4. 导出 (Export)
- 支持将整棵树导出为：
  - 电子书 (EPUB/PDF)
  - 维基站点 (HTML)
  - 游戏设定集 (JSON/YAML)
