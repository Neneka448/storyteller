# Storyteller 产品功能与 PRD（MVP + 演进）

版本：v0.1（草案）
日期：2025-12-13

## 1. 一句话定义
一个面向“总导演式创作”的桌面端工具：用户用 Chat 指导 AI 讲故事并做修改；系统把创作拆成步骤（Steps），每一步产出可见产物（Artifacts），用户随时审阅、回退、重做；第一期聚焦从文本到图文/CG（图片），动画/视频能力后续演进但接口预留。

## 2. 目标用户与场景
### 2.1 目标用户
- A：短片/分镜创作者（想快速把故事变成可视化）
- B：插画/漫画分镜创作者（想把文本快速变成图文）
- C：内容团队策划（需要快速方案迭代与版本对比）

### 2.2 典型场景
- 场景 1：用户给一句故事梗概 → AI 产出世界观/角色/大纲 → 用户改两句 → AI 更新 → 生成剧本与分镜。
- 场景 2：分镜出来后，用户点选某一镜头说“更紧张、更暗、换角度” → AI 只重做该镜头分镜/提示词，并保留旧版本。
- 场景 3：用户确认风格与角色锚点后，生成角色设定图/关键帧/镜头图，并在步骤里对比采纳。

## 3. 产品成功标准（可量化）
- 30 分钟内：从 1 段故事意图 → 得到可导出的剧本 + 分镜（镜头列表）+ 至少 3 张关键图片（角色/关键帧/镜头图）
- 用户能清楚回答：当前做到哪一步、下一步是什么、哪些内容可以回退重做
- 同一项目中，关键产物支持“多版本对比 + 一键采纳”

## 4. 核心产品原则
- 产物驱动：每一步都必须有“看得见的东西”（文本/表格/图/视频）
- 可回溯：任何一步可重跑，并保留版本与来源
- 可控：AI 不是黑盒，一定要把“提示词/参数/引用素材/生成时间”记录到产物元数据里
- 导演友好：UI 强调“审阅、批注、采纳、继续”，而不是“写一堆参数”

## 5. 产品功能清单（从工业流程抽象）
### 5.1 写作开发（故事 → 文本）
- 世界观圣经（World Bible）生成与维护
- 角色圣经（Character Bible）生成与维护（含视觉锚点描述）
- 故事大纲（Outline / Beat Sheet）生成与迭代
- 剧本（Script）生成与改写（按场景/节）

### 5.2 预制作（文本 → 分镜/镜头语言）
- 分镜（Storyboard）生成：镜头列表（景别/机位/运动/时长/画面意图/对白旁白/提示词）
- 连续性检查（Continuity）：角色衣着/时间线/空间关系提示
- 风格指南（Style Bible）：色彩/光照/构图/镜头语言的统一约束

### 5.3 图文与 CG（图片）
- 角色设定图/立绘生成（可重试、可换风格、可锁角色锚点）
- 关键帧生成（用于锚定风格与一致性）
- 镜头图生成（按分镜镜头生成候选图，并与镜头元数据关联）

### 5.4 动画与视频（后续演进，接口预留）
- 动态分镜（Animatic）：分镜 + 时长 + 转场 + 字幕/旁白
- 镜头级视频生成与合成

### 5.5 Chat 驱动与版本管理（贯穿全流程）
- Chat 对话：用户指导、AI 追问澄清、给出方案 A/B
- 批注与采纳：对某一步/某个镜头打批注并触发局部重做
- 版本对比：同一步多版本切换、diff（文本优先）
- 运行日志：每一步何时生成、用了什么参数、花了多久、失败原因

## 6. MVP PRD（v0.1）
### 6.1 MVP 范围（必须做）
**目标：打通“故事 → 剧本 → 分镜（镜头列表） → 图文/CG（图片）”的闭环，并做到产物可见、可回退、可局部重做。**

- 项目（Project）
  - 新建/打开/删除项目
  - 项目内保存：世界观、角色、脚本、分镜、运行记录
- Chat（导演指挥）
  - 消息流 + 输入框
  - AI 输出必须能引用到具体步骤/镜头（例如：更新“分镜#12”）
  - 支持按钮动作：继续下一步 / 重做当前步 / 回退到某步
- 步骤时间线（Steps）
  - 固定一条最小步骤链（线性即可）：
    1) 世界观草案
    2) 角色草案
    3) 大纲
    4) 剧本（按场景）
    5) 分镜（镜头列表）
    6) 角色设定图（至少 1 张，可多版本）
    7) 关键帧（至少 3 张，用于锚定风格）
  - 每一步展示：状态（未开始/生成中/成功/失败）、版本数、最后更新时间
- 产物查看器（Artifacts Viewer）
  - 文本类：Markdown/纯文本预览
  - 表格类：分镜镜头列表（至少可排序/展开看镜头详情）
  - 图片类：缩略图列表 + 大图预览 + 版本切换（采纳/回滚）
  - 导出：JSON + Markdown（脚本/分镜）
- 版本与回退
  - 同一步多版本保存（至少保留最近 N=10）
  - 一键切换版本（采纳某版本成为“当前版本”）

### 6.2 MVP 不做（明确排除）
- 动画/视频生成（仅保留接口与数据结构预留）
- 复杂节点画布编辑器（MVP 用“固定步骤链 + 参数面板”即可）
- 账号体系/云同步/团队协作

### 6.3 用户流程（MVP）
1) 新建项目 → 输入一句故事意图
2) AI 提问澄清（可选）→ 生成世界观/角色
3) 用户在 Chat 里批注 → AI 更新该步骤并产出新版本
4) 点击“继续”→ 生成大纲 → 剧本 → 分镜
5) 在分镜里点选镜头，输入“更紧张、更近景、加逆光”→ AI 只重做选中镜头（产出新版本）
6) 点击“继续”→ 生成角色设定图与关键帧（多版本可采纳）
7) 导出剧本、分镜与图片（至少支持本地文件夹导出）

### 6.4 关键交互与页面（MVP 信息架构）
- 左侧：Steps 时间线（可折叠）
- 中间：当前步骤产物（Viewer）
- 右侧：Chat（包含工具调用/运行日志）

### 6.5 数据与可追溯性（MVP 必须）
- 每个 Artifact 必须包含：来源 stepId、生成时间、输入摘要、提示词/参数摘要、版本号
- 每次重做生成一个新的 artifactVersion，而不是覆盖

### 6.6 验收标准（MVP）
- 端到端：从故事意图 → 剧本 + 分镜（镜头列表）+ 关键图片产出成功
- 局部重做：指定某一步/某镜头能生成新版本且可切回旧版本
- 导出：能导出 Markdown/JSON（文本与分镜）+ 图片文件

## 7. 演进路线（后续几期）
### 7.1 v0.2（可控性与审阅体验）
- “风格指南 Style Bible”步骤：统一色彩/光照/构图/镜头语言
- 连续性检查：自动指出前后矛盾（角色外观/道具/时间线）
- 文本 diff：剧本/分镜版本差异对比
- 更强的局部重做：镜头级别参数（时长、景别、运动）可直接在 UI 调整

### 7.2 v0.3（图片：一致性与批量化）
- 角色一致性增强：角色锚点（特征词/参考图）在全项目生效
- 镜头图批量生成：按分镜批量出图，每镜多张候选 + 采纳/回滚
- 提示词与构图辅助：给出“构图/光照/镜头语言”建议与一键套用
- 产物管理：图片浏览、筛选、引用到镜头

### 7.3 v0.4（动态分镜 Animatic，预留演进）
- 将分镜生成可播放时间线：
  - 镜头图 + 时长 + 转场 + 字幕/旁白
- 导出：mp4（基础） + edl/json（可选）

### 7.4 v0.5（视频镜头与合成，预留演进）
- 镜头级视频生成（单镜头可重做）
- 镜头合成与整体节奏调整
- 失败重试、并发控制、成本/时间预估（面向 GPU 平台调用）

## 8. 风险与对策（产品层）
- 风格一致性风险：先做“风格指南 + 关键帧锚定”，再扩到批量镜头
- 用户迷失风险：Steps 时间线必须明确下一步与当前状态
- 返工成本风险：强制版本化 + 局部重做（镜头级）

## 9. 开放问题（需要你拍板的业务策略）
- 输出定位：更偏“图文故事/漫画分镜”还是“CG 分镜预制作（图片）”？
- 默认风格：提供少量预设（写实/动画/赛博等）还是完全自由？
- GPU 平台调用计费/限额：是否需要在产品内做成本提示？
